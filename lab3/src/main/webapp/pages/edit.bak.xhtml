<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
<f:metadata>
    <f:event type="preRenderView" listener="#{teamRepository.init() }"/>
</f:metadata>
<h:head>
    <title>Edit a team</title>
</h:head>
<h:body>

    <div class="card">
        <p:commandButton value="Create a new team" type="button" icon="pi pi-external-link" onclick="PF('dlg2').show()"/>
        <p:commandButton value="Update a team" type="button" icon="pi pi-external-link" onclick="PF('dlg3').show()"/>
    </div>

    <p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true" widgetVar="msgsWidget"/>
    <p:growl id="msgs2" showDetail="true" skipDetailIfEqualsSummary="true" widgetVar="msgsWidget"/>

    <!--        Create a new team-->
    <p:dialog header="Create a new team" widgetVar="dlg2" minHeight="40" width="350" showEffect="fade" modal="true">
        <h:form>

            <p:remoteCommand name="rc" update="msgs" action="#{teamRepository.getDisplayMessage}"/>
            <h3>Name</h3>
            <p:inputText value="#{teamRepository.team.name}"/>
            <h3>Founding date</h3>
<!--            <p:inputText value="#{teamRepository.team.foundingDate}" converter="dateConverter"/>-->
            <p:inputText value="#{teamRepository.team.foundingDate}"/>
            <h3>City</h3>
            <p:inputText value="#{teamRepository.team.city}"/>
            <p:commandButton value="Create" icon="pi pi-check" disableOnAjax="false"
                             action="#{teamRepository.getCreateTeam}" onclick="rc()" oncomplete="PF('dlg2').hide()"/>
        </h:form>
    </p:dialog>

    <!--    Update a team-->
    <p:dialog id="editDialog" header="Update a team" widgetVar="dlg3" minHeight="40" width="350" showEffect="fade"
              modal="true">

<!--        <h:form>-->
<!--            <p:outputLabel for="team" value="Team: "/>-->
<!--            <p:selectOneMenu id="team" value="#{teamRepository.team2}" style="width:150px"-->
<!--                converter="teamConverter">-->
<!--                <p:ajax listener="#{teamRepository.onTeamSelected}" process="@this" render="teamName teamFoundingDate teamCity"/>-->
<!--                <f:selectItem itemLabel="Select Team" itemValue="" noSelectionOption="true"/>-->
<!--                <f:selectItems value="#{teamRepository.teams}"/>-->
<!--            </p:selectOneMenu>-->

<!--            <h3>Name</h3>-->
<!--            <p:outputLabel id="teamName" value="#{teamRepository.team2.name}"/>-->
<!--            <h3>Founding date</h3>-->
<!--            <p:outputLabel id="teamFoundingDate" value="#{teamRepository.team2.foundingDate}"/>-->
<!--            <h3>City</h3>-->
<!--            <p:outputLabel id="teamCity" value="#{teamRepository.team2.city}"/>-->

<!--            <p:remoteCommand name="rc" update="msgs2" action="#{teamRepository.getDisplayMessage}"/>-->

<!--            <p:commandButton value="Update team" icon="pi pi-check" disableOnAjax="false"-->
<!--                             action="#{teamRepository.getCreateTeam}" onclick="rc()" oncomplete="PF('dlg3').hide()"/>-->
<!--        </h:form>-->
        <h:form>
            <p:outputLabel for="team" value="Team: "/>
            <p:selectOneMenu id="team" value="#{teamRepository.team2}" style="width:150px" converter="teamConverter">
                <p:ajax listener="#{teamRepository.onTeamSelected}" update="teamInfo"/>
                <f:selectItem itemLabel="Select Team" itemValue="" noSelectionOption="true"/>
                <f:selectItems value="#{teamRepository.teams}"/>
            </p:selectOneMenu>

            <p:outputPanel id="teamInfo" styleClass="mb-2">
                <h3>Name</h3>
                <p:outputLabel value="#{teamRepository.team2.name}"/>
                <h3>Founding date</h3>
                <p:outputLabel value="#{teamRepository.team2.foundingDate}" />
<!--                <p:outputLabel value="#{teamRepository.team2.foundingDate}" converter="dateConverter"/>-->
                <h3>City</h3>
                <p:outputLabel value="#{teamRepository.team2.city}"/>
            </p:outputPanel>

            <p:commandButton value="Update team" icon="pi pi-check" disableOnAjax="false"
                             action="#{teamRepository.getCreateTeam}" oncomplete="PF('dlg3').hide()"/>
        </h:form>
    </p:dialog>



</h:body>
</html>
